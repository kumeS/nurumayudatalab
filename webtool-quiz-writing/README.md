# 小中高生向け記述式クイズ・添削ツール

## 📝 プロジェクト概要

本プロジェクトは、LLM（大規模言語モデル）を活用した教育支援ツールです。従来の選択式クイズシステムから発展し、**記述式回答の自動評価・添削システム**を実現しています。

### 🎯 主な目的
- 国語、算数・数学、英語、理科、社会の5教科における記述式問題の生成
- 学生の自由記述回答に対する専門的な評価・添削
- 間違いの指摘と具体的な訂正アドバイスの提供
- 学習レベル別（小学生低学年〜高校生）の適応的問題生成

## 🚀 主な機能

### ✅ 実装済み機能

#### 1. 記述式クイズ生成システム
- **教科別問題生成**: 国語、算数・数学、英語、理科、社会
- **学習レベル対応**: 小学生（低・中・高学年）、中学生、高校生
- **問題数選択**: 3問または5問
- **教科特性の活用**: 各教科の特徴を活かした専門的問題作成

#### 2. AI評価・添削システム
- **多段階評価**: 0-100点での数値評価
- **4段階レベル判定**: 優秀・良好・普通・要改善
- **詳細フィードバック**:
  - 良い点の具体的指摘
  - 改善点の明確化
  - 間違い箇所の訂正提案
  - 建設的な改善アドバイス
  - 励ましのメッセージ

#### 3. ユーザーインターフェース
- **レスポンシブデザイン**: モバイル・タブレット・デスクトップ対応
- **直感的操作**: シンプルで使いやすいUI
- **リアルタイム入力**: 音声入力・テキスト入力両対応
- **視覚的フィードバック**: 評価結果の色分け表示
- **祝福演出**: スコアに応じた励ましアニメーション

#### 4. 学習支援機能
- **サンプルテキスト**: 各学習レベルに対応した5教科のサンプル
- **音声認識入力**: Web Speech APIによる音声テキスト変換
- **進捗管理**: 累積スコア・回数の記録
- **データ永続化**: ローカルストレージによる入力内容保存

## 📊 技術仕様

### 🏗️ アーキテクチャ
- **フロントエンド**: HTML5 + CSS3 + Vanilla JavaScript
- **AIエンジン**: LLM API (meta-llama/Llama-4-Maverick-17B-128E-Instruct-FP8)
- **デプロイ**: 静的ウェブアプリケーション
- **外部API**: Cloudflare Workers経由でのLLMアクセス

### 📂 ファイル構成
```
webtool_quiz_writing1/
├── index.html          # メインHTML (1,737行)
├── app.js              # JavaScript ロジック (1,506行)
├── 実装案.txt          # 開発要件書
└── README.md           # プロジェクト文書
```

### 🔧 主要なJavaScript関数
- `generateQuiz()`: 記述式問題生成
- `evaluateWithLLM()`: AI評価システム
- `createEvaluationMessages()`: 評価プロンプト生成
- `displayEvaluationResults()`: 結果表示
- `createQuestionCard()`: 問題UI生成
- `calculateOverallScore()`: スコア計算

## 🔍 実装状況の詳細

### ✅ 完全実装済み
1. **記述式問題生成**: LLM APIを活用した教科別・レベル別問題作成
2. **回答評価システム**: 多角的評価による詳細フィードバック
3. **UI/UXデザイン**: モダンでアクセシブルなインターフェース
4. **音声入力**: Web Speech APIによる音声認識
5. **データ管理**: LocalStorageによる永続化
6. **エラーハンドリング**: API呼び出し失敗時のフォールバック

### ⚠️ 潜在的な改善点

#### コード品質
- **古いコード残存**: 選択式クイズ時代の関数が一部残存
  - `getVariationInstructions()`, `getFocusAreas()` 等
  - 使用されていない `quizType` パラメータ
- **関数の重複**: 評価システムと旧システムの混在

#### UI/UX改善点
- **エラー表示**: API失敗時のユーザーフィードバック改善
- **ローディング**: 評価中の詳細な進捗表示
- **レスポンシブ**: 超小画面での表示最適化
- **アクセシビリティ**: キーボードナビゲーション強化

#### 機能拡張の余地
- **学習履歴**: 過去の回答・評価の保存・表示
- **弱点分析**: 苦手分野の特定・重点学習提案
- **他形式対応**: 図表・画像を含む問題への対応
- **協働学習**: 複数生徒での共同学習機能

## 🐛 特定されたバグ・問題点

### 🔴 Critical Issues
- **API依存**: LLM APIが利用不可の場合の完全な機能停止
- **エラー処理**: ネットワークエラー時の不適切な表示

### 🟡 Minor Issues
- **古い関数**: 使用されない関数の残存によるコードサイズ増大
- **パフォーマンス**: 大量テキスト処理時の応答性低下
- **ブラウザ互換性**: 古いブラウザでの音声認識非対応

### 💡 改善提案
1. **オフライン対応**: 基本的な問題生成のローカル実装
2. **キャッシュ機能**: 生成済み問題の再利用システム
3. **段階的読み込み**: 大型コンテンツの遅延読み込み
4. **プログレッシブウェブアプリ**: PWA化による体験向上

## 🛠️ 開発ロードマップ

### Phase 1: 品質向上 (1-2週間)
- [ ] 未使用コードの除去・リファクタリング
- [ ] エラーハンドリングの強化
- [ ] UI/UXの微調整
- [ ] テストケースの作成

### Phase 2: 機能拡張 (2-4週間)
- [ ] 学習履歴・分析機能
- [ ] オフライン対応
- [ ] 画像・図表対応
- [ ] 詳細な弱点分析

### Phase 3: スケール対応 (1-2ヶ月)
- [ ] マルチユーザー対応
- [ ] データベース連携
- [ ] 管理者ダッシュボード
- [ ] API最適化

## 📋 使用方法

1. **環境準備**: モダンブラウザでindex.htmlを開く
2. **設定**: 学習レベル・教科・問題数を選択
3. **入力**: 学習内容をテキスト・音声で入力
4. **生成**: 「クイズ生成」ボタンで問題作成
5. **回答**: 各問題に記述式で回答
6. **評価**: 「回答を評価する」でAI添削実行
7. **学習**: 詳細フィードバックで理解を深化

## 🤝 貢献・開発

### 開発環境
- Node.js (推奨: v18以上)
- モダンブラウザ (Chrome, Firefox, Safari, Edge)
- LLM API アクセスキー

### ライセンス
本プロジェクトはMITライセンスの下で公開されています。

---

**最終更新**: 2024年12月 | **バージョン**: 2.0 | **作成者**: ぬるま湯データラボ