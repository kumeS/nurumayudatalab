<!-- index.html – Amazon A+ コンテンツ <br> ジェネレーター -->
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>A+ コンテンツ改行ジェネレーター</title>
<style>
  body     { font-family: system-ui, sans-serif; margin: 2rem; line-height:1.55; }
  textarea { width: 100%; height: 10rem; padding:.6rem; font-size:1rem; resize:vertical; }
  button   { margin-top: .8rem; padding:.4rem 1rem; font-size:1rem; }
  #result  { margin-top:2rem; background:#f7f7f7; padding:1rem; white-space:pre-wrap; word-break:break-all;}
  #btnGroup button { margin-right: 0.5rem; }
  small    { color:#666; }
</style>
</head>
<body>
<h1>A+ コンテンツ <br> 自動挿入ツール</h1>

<p>❶ 説明文をそのまま貼り付け → ❷ 文字数を選んで実行<br>
長い行は指定文字数で自動改行し、段落は <code>&lt;br&gt;&lt;br&gt;</code> に変換されます。</p>

<textarea id="input" placeholder="ここに段落テキストを入力"></textarea><br>

<div id="btnGroup">
  <button onclick="convertToBr(50)">50文字で改行</button>
  <button onclick="convertToBr(60)">60文字で改行</button>
  <button onclick="convertToBr(70)">70文字で改行</button>
  <button onclick="convertToBr(80)">80文字で改行</button>
</div>

<section id="result" hidden></section>

<script>
/*=== メインロジック ===*/
function convertToBr(maxLen){
  const src = document.getElementById('input').value;
  if(!src.trim()) { alert('テキストを入力してください'); return; }

  // 改行を正規化
  let paragraphs = src.replace(/\r\n/g, '\n').trim().split(/\n{2,}/);

  // パラグラフごとに処理
  const result = paragraphs.map(paragraph => {
    // 改行を消して単一行化
    const words = paragraph.replace(/\n/g, ' ').split(/\s+/);

    let line = '', lines = [];
    words.forEach(w => {
      const testLine = line ? `${line} ${w}` : w;

      if (testLine.length <= maxLen) {
        line = testLine;
      } else {
        lines.push(line);
        line = w;
      }
    });
    if (line) lines.push(line);

    // 各行を <br> で繋ぎ、段落を <br><br> で区切る
    return lines.join('<br>');
  }).join('<br><br>');

  // 結果表示
  const out = document.getElementById('result');
  out.innerText = result;
  out.hidden = false;
}
</script>

<footer><small>© 2025 ぬるま湯データラボ</small></footer>
</body>
</html>
