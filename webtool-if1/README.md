# 共感スペクトラム・メッセンジャー & 未来記憶の共創ツール

## 📌 プロジェクト概要

このプロジェクトは、AI技術を活用した2つの革新的なウェブツールを提供します：

### 1. 共感スペクトラム・メッセンジャー
"心の温度"を可視化するAI翻訳対話ツール
- テキスト・音声入力による多言語コミュニケーション
- AI感情分析による本心度・礼儀正しさ・感情強度の測定
- 文化的背景分析と誤解リスク警告
- リアルタイム翻訳とダッシュボード分析

### 2. 未来記憶の共創ツール
"もしも"の人生をAIと創り、他者と交換できる仮想体験プラットフォーム
- 現実記憶の入力と分析
- if世界パラメータ設定による仮想体験生成
- 異なる文化・時代・環境での記憶シミュレーション
- タイムライン表示と体験共有機能

## 🚀 技術スタック

- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **AI/LLM**: Meta-Llama/Llama-4-Maverick-17B-128E-Instruct-FP8
- **音声認識**: Web Speech API
- **データ永続化**: LocalStorage + JSON export/import
- **UI/UX**: レスポンシブデザイン、グラデーション、アニメーション

## 📁 ファイル構成

```
webtool-if1/
├── index.html              # 共感スペクトラム・メッセンジャー（メインツール）
├── future-memory.html      # 未来記憶の共創ツール
├── app.js                  # 既存のLLMツール（参考用）
├── 実装案.txt              # 詳細な機能仕様書
└── README.md              # このファイル
```

## ✅ 実装済み機能

### 共感スペクトラム・メッセンジャー
- [x] **LLM API統合**: 高度な感情分析とAI翻訳
- [x] **音声入力**: Web Speech APIによる15言語対応
- [x] **多言語翻訳**: 日本語⇔英語を中心とした翻訳機能
- [x] **感情スペクトラム分析**: 本心度・礼儀正しさ・感情強度の可視化
- [x] **文化的注釈**: LLMによる詳細な文化的背景分析
- [x] **誤解警告システム**: AIによる誤解リスク検出とアラート
- [x] **ダッシュボード機能**: 
  - 履歴管理
  - 共感度推移グラフ（Canvas描画）
  - 感情分布ヒートマップ
  - 言語使用分布チャート
- [x] **データ永続化**: LocalStorage + export/import機能

### 未来記憶の共創ツール
- [x] **基盤実装**: 完全な UI/UX 実装
- [x] **現実記憶入力**: カテゴリ分類付き記憶入力
- [x] **AI記憶分析**: LLMによる記憶の要素分解
- [x] **if世界設定**: 事前設定シナリオ + カスタムシナリオ
- [x] **if記憶生成**: AIによる仮想体験ストーリー生成
- [x] **タイムライン機能**: 生成履歴の時系列表示
- [x] **データ永続化**: LocalStorageによる履歴保存

## 🛠 技術的特徴

### AI統合
- **統一API**: 両ツール共通のLLM API呼び出し関数
- **エラーハンドリング**: フォールバック機能付き
- **非同期処理**: Promise/async-awaitによる並行処理

### UI/UX設計
- **レスポンシブ**: モバイル・デスクトップ対応
- **アクセシビリティ**: フォーカス管理、キーボード操作
- **ビジュアル**: グラデーション、アニメーション、マイクロインタラクション

### データ管理
- **自動バックアップ**: セッション終了時の自動保存
- **データ検証**: 破損データの自動修復
- **容量管理**: 5MB制限、古いデータの自動削除

## 🚧 未実装・改善予定機能

### 高優先度
- [ ] **エラーハンドリング強化**
  - API接続失敗時のより詳細なエラー表示
  - オフライン時の機能制限モード
  - レート制限対応

- [ ] **パフォーマンス最適化**
  - 大量データ処理時の遅延改善
  - Canvas描画の最適化
  - メモリリーク対策

- [ ] **アクセシビリティ改善**
  - スクリーンリーダー対応
  - キーボードショートカット
  - 色覚バリアフリー対応

### 中優先度
- [ ] **未来記憶の共創機能拡張**
  - 複数人での共創モード
  - if記憶の比較・分析機能
  - 体験交換・共有システム

- [ ] **共感スペクトラム機能拡張**
  - グループチャット対応
  - リアルタイム対話分析
  - 感情履歴の詳細分析

- [ ] **データ分析強化**
  - より詳細な統計情報
  - トレンド分析
  - パーソナライズド学習

### 低優先度
- [ ] **PWA対応**
  - Service Worker実装
  - オフライン機能
  - プッシュ通知

- [ ] **外部連携**
  - SNS共有機能
  - 他のツールとの連携API
  - データエクスポート形式の拡張

## 🐛 既知の問題・バグ

### 重要度: 高
1. **音声認識の言語切り替え**
   - 言語変更時の音声認識再初期化で稀にエラー
   - 回避策: ページリロード

2. **大量データでの描画遅延**
   - 100件以上の履歴でグラフ描画が重い
   - 対策必要: データの分割表示

### 重要度: 中
3. **モバイルでの音声入力**
   - iOS Safariで音声認識が不安定
   - 代替手段: テキスト入力の推奨

4. **ローカルストレージの容量**
   - 大量利用時の容量警告が不十分
   - 改善必要: より詳細な容量表示

### 重要度: 低
5. **UI微調整**
   - 一部ブラウザでのCSS表示差異
   - ダークモード未対応
   - アニメーション速度の調整

## 🎯 改善提案

### UI/UX改善
1. **ローディング状態の改善**
   - より具体的な進捗表示
   - 処理時間の目安表示
   - キャンセル機能の追加

2. **入力支援機能**
   - サンプルテキストの提供
   - 入力候補の表示
   - テンプレート機能

3. **ビジュアル強化**
   - より直感的なアイコン
   - 色分けによる情報整理
   - アニメーションの最適化

### 機能改善
1. **分析精度向上**
   - より多様な感情カテゴリ
   - 文脈を考慮した分析
   - ユーザーフィードバック学習

2. **データ活用**
   - 個人の傾向分析
   - 改善提案の自動生成
   - 目標設定機能

## 🔧 セットアップ・使用方法

### 必要要件
- モダンブラウザ（Chrome 88+, Firefox 85+, Safari 14+）
- インターネット接続（LLM API利用のため）
- マイクアクセス許可（音声入力使用時）

### インストール
```bash
# プロジェクトをクローン
git clone [repository-url]
cd webtool-if1

# HTTPサーバーで起動（ローカルファイルアクセス制限回避）
python -m http.server 8000
# または
npx serve .
```

### 使用方法
1. ブラウザで `http://localhost:8000` にアクセス
2. **共感スペクトラム・メッセンジャー** (index.html)
   - テキストまたは音声でメッセージ入力
   - 言語を選択して分析実行
   - 結果をダッシュボードで確認

3. **未来記憶の共創ツール** (future-memory.html)
   - 現実の記憶を詳細に入力
   - if世界パラメータを設定
   - AI生成された仮想体験を確認

## 📈 パフォーマンス指標

### 応答速度
- AI分析: 平均3-5秒
- 翻訳: 平均2-4秒
- if記憶生成: 平均5-8秒

### データ容量
- 会話履歴100件: 約500KB
- if記憶履歴50件: 約1MB
- 推奨最大: 5MB（自動管理）

## 🔐 セキュリティ・プライバシー

### データ保護
- すべてのデータはローカルストレージに保存
- サーバーへの永続的なデータ送信なし
- API通信は処理時のみ一時的

### プライバシー配慮
- 個人識別情報の収集なし
- 分析データの外部送信なし
- ユーザーによる完全なデータ制御

## 🤝 貢献・開発

### 開発環境
```bash
# 開発サーバー起動
npm install -g live-server
live-server --port=8000

# またはPythonの場合
python -m http.server 8000
```

### コード構成
- **index.html**: メインアプリケーション（2000行超）
- **future-memory.html**: サブアプリケーション（800行）
- **app.js**: 参考実装（既存LLMツール）

### 貢献ガイドライン
1. Issue作成による改善提案
2. Feature branchでの開発
3. プルリクエストでのレビュー
4. テスト実行の確認

## 📞 サポート・連絡先

### 技術的質問
- GitHub Issues での報告推奨
- バグ報告時は再現手順を明記

### 機能要望
- 実装案.txt の内容を参考に具体的に記載
- 優先度と使用場面の説明

---

**開発状況**: アクティブ開発中  
**最終更新**: 2024年12月（プロジェクト開始）  
**ライセンス**: [ライセンス情報を追加]  
**作成者**: NurumayuDataLab  