# AI-powered Web Editor (AWE) - 完全ドキュメント

**バージョン**: v1.7.0 (CRM Features)  
**最終更新**: 2025年11月23日  
**カラースキーム**: オレンジ系 (#FF9966 - ぬるま湯データラボ風・柔らかい調整版)  
**プロジェクトオーナー**: 久米慧嗣様

---

## 📋 目次

1. [クイックスタート](#クイックスタート)
2. [プロジェクト概要](#プロジェクト概要)
3. [主な特徴と機能](#主な特徴と機能)
4. [技術仕様](#技術仕様)
5. [ファイル構造](#ファイル構造)
6. [カラースキーム](#カラースキーム)
7. [キーボードショートカット](#キーボードショートカット)
8. [バージョン履歴](#バージョン履歴)
9. [トラブルシューティング](#トラブルシューティング)
10. [オリジナル仕様書](#オリジナル仕様書)
11. [JSリファクタリング計画](#jsリファクタリング計画)
12. [既知の問題とTODO](#既知の問題とtodo)
13. [今後の拡張計画](#今後の拡張計画)

---

## 🚀 クイックスタート

### 最もシンプルな起動方法

```bash
# index.htmlをダブルクリック
# または
# ブラウザにドラッグ&ドロップ
```

**それだけです！** 外部サーバー、npm install、ビルド不要。

### オプション：ローカルサーバー

```bash
# Python 3
python3 -m http.server 8000
# アクセス: http://localhost:8000/index.html

# Node.js
npx http-server -c-1 -p 5173
# アクセス: http://localhost:5173/index.html
```

### AI機能の設定

1. 右上の**設定アイコン（⚙️）**をクリック
2. **AI設定タブ**を開く
3. **APIキー**を入力
4. **保存**をクリック

---

## 🎯 プロジェクト概要

### ビジョン
日常的なメール作成を効率化し、AIが文脈を理解してユーザーの生産性を向上させる**単一HTMLファイル完結型**のWebエディター

### 解決する課題
- ✅ メール作成時間の**50%削減**
- ✅ 適切なトーン調整（文法チェックは現在開発中）
- ✅ シンプルで学習コストゼロのインターフェース
- ✅ セッション間でのコンテキスト記憶

### 期待される成果
- メール作成時間: 平均1日2-3時間 → 1-1.5時間
- 文書品質の向上（トーン統一を先行実装、文法チェックは次期対応予定）
- 日常業務の効率化

---

## ✨ 主な特徴と機能

### エディタ機能
- ✅ **リッチテキスト編集**: 太字、斜体、下線、リスト形式
- ✅ **Undo/Redo**: 完全な履歴管理
- ✅ **自動保存**: 30秒ごとの自動保存
- ✅ **文字数カウンター**: リアルタイム表示

### AI支援機能
- ✅ **文章改善**: AIによる改善提案
- 🚧 **文法チェック**: UIのみ（開発中）
- ✅ **トーン調整**: フォーマル/カジュアル/友好的
- ✅ **カスタムプロンプト**: ユーザー独自のプロンプト

### メール特化機能
- ✅ **テンプレート**: ビジネスメール、お礼メールなど
- ✅ **件名生成**: 本文から自動生成
- ✅ **下書き管理システム**: 30秒ごと自動保存、最大10件保持（NEW!）
- ✅ **下書き一覧**: モーダルで確認・読み込み・削除（NEW!）
- ✅ **テキストエクスポート**: プレーンテキスト/Markdown/クリップボード（NEW!）

### デザイン
- ✅ **ぬるま湯データラボ風**: オレンジ系カラースキーム
- ✅ **ダークモード**: ライト/ダーク切り替え
- ✅ **レスポンシブ**: モバイル・タブレット・デスクトップ対応
- ✅ **アクセシビリティ**: ARIA属性完備、キーボード操作対応

---

## 🔧 技術仕様

### アーキテクチャ
- **単一HTMLファイル完結型**: すべてのCSS/JavaScriptがインライン（110KB）
- **外部依存ゼロ**: CDNへの依存なし、完全オフライン対応
- **Vanilla JavaScript**: フレームワーク依存なし（ES6+）

### データストレージ
- **IndexedDB v3**: メインストレージ（settings, models, drafts, contacts）
  - `settings`: アプリ設定
  - `models`: AIモデル情報
  - `drafts`: 下書き（最大10件）
  - `contacts`: 連絡先（無制限）
- **LocalStorage**: フォールバックストレージ
- **ContentEditable API**: リッチテキスト編集

### ブラウザ互換性
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

### パフォーマンス
- **初回ロード時間**: < 1秒（ローカル）
- **AI応答時間**: < 5秒
- **メモリ使用量**: < 50MB

---

## 📁 ファイル構造

### 本番ファイル（最重要）

```
index.html (110KB) ⭐ メインファイル
  ├── インラインCSS（約1,600行）
  └── インラインJavaScript（約1,300行）
```

✅ **完全自己完結型**  
✅ **外部依存ゼロ**  
✅ **オフライン完全対応**

### 開発・参照ファイル（オプション）

```
styles/
  └── main.css (25KB)           # CSS参照用

js/
  ├── inline-app.js (48KB)      # 統合JS参照用
  ├── app.js (22KB)             # モジュール版
  ├── components/               # UIコンポーネント
  │   ├── Editor.js
  │   ├── AIPanel.js
  │   ├── Toolbar.js
  │   └── TemplateManager.js
  ├── services/                 # サービス層
  │   ├── AIService.js (18KB)
  │   ├── StorageService.js
  │   └── MemoryService.js (11KB)
  └── utils/                    # ユーティリティ
      ├── ui.js
      └── debounce.js
```

⚠️ **注意**: これらは**index.htmlでは使用されていません**（開発参照用）

---

## 🎨 カラースキーム

### ぬるま湯データラボ風（オレンジ系）- v1.4調整版

#### Light Mode
```css
--primary-color: #FF9966;        /* メインオレンジ（柔らかい）*/
--primary-dark: #FF7F50;         /* コーラルオレンジ（ホバー） */
--primary-light: #FFB347;        /* パステルオレンジ */
--secondary-color: #FFA500;      /* アンバーオレンジ */
--accent-color: #FFAA66;         /* ゴールデンオレンジ（柔らかい） */
```

#### Dark Mode
```css
--primary-color: #FFB088;        /* 明るいオレンジ */
--primary-dark: #FF9966;         /* 標準オレンジ */
--primary-light: #FFC299;        /* より明るいオレンジ */
--secondary-color: #FFB84D;      /* 明るいアンバー */
--accent-color: #FFBB77;         /* 明るいゴールデン */
```

### カラー使用箇所
- **プライマリボタン**: 保存、送信、AI提案
- **ホバー効果**: すべてのインタラクティブ要素
- **グラデーション**: 背景、ヘッダー
- **通知・バッジ**: 重要な情報表示

---

## ⌨️ キーボードショートカット

| 機能 | Windows/Linux | macOS |
|------|---------------|-------|
| 太字 | Ctrl+B | Cmd+B |
| 斜体 | Ctrl+I | Cmd+I |
| 下線 | Ctrl+U | Cmd+U |
| 元に戻す | Ctrl+Z | Cmd+Z |
| やり直す | Ctrl+Y | Cmd+Y |
| 保存 | Ctrl+S | Cmd+S |
| 文法チェック（開発中） | - | - |
| トーン変更 | Ctrl+T | Cmd+T |

---

## 📝 バージョン履歴

### v1.7.1 (Stability & Documentation) - 2025年11月23日
- 🛠️ AIチャット送信ボタンが動作しない問題を修正（DOMセレクタの整合性確保）
- 📝 文法チェック機能のUIを「開発中」表示に変更し、設定/ショートカット/ドキュメントを実装状況に合わせて更新

### v1.7.0 (CRM Features) - 2025年11月23日
- 📊 **CRM機能の実装: 要件・トピック管理**
  - 要件/プロジェクトフィールド追加
  - 最近のトピックフィールド追加
  - テキストエリアで詳細情報を記録可能
- 📧 **メール履歴機能の実装**
  - メール送信時に自動的に履歴を記録
  - 過去のメールやりとりを時系列で表示
  - 最新20件まで自動保存
  - 履歴の詳細表示モーダル
  - 履歴の個別削除機能
- 🔄 **連絡先データモデルの拡張**
  - `requirements`: 要件・プロジェクト内容
  - `topics`: 最近のトピック
  - `emailHistory[]`: メール履歴配列
    - `to`: 宛先
    - `subject`: 件名
    - `content`: 本文
    - `timestamp`: 送信日時
- 🎨 **UI改善**
  - メール履歴表示エリア（折りたたみ式）
  - 履歴アイテムのプレビュー表示
  - 日時表示とアクションボタン
- 📱 **ユーザビリティ向上**
  - 連絡先読み込み時に履歴も自動表示
  - 履歴がない場合は非表示
  - 長文は自動的に省略表示

### v1.6.1 (Auto-Save Contacts) - 2025年11月22日
- 🎯 **UX改善: 自動保存に変更**
  - 「連絡先に保存」ボタンを削除
  - 「情報を適用」ボタンで自動的に連絡先に保存
  - ワンクリックで適用と保存を同時実行
  - トーストメッセージを「相手先情報を適用し、連絡先に保存しました」に変更
- 🧹 **コードクリーンアップ**
  - 不要なsaveContactメソッド削除
  - UI/CSSをシンプル化（ボタン1つ）
  - イベントリスナーの整理

### v1.6.0 (Contact Management) - 2025年11月22日
- 📇 **連絡先管理機能の実装**
  - 相手先情報の保存機能（連絡先に保存ボタン）
  - 保存した連絡先の一覧表示
  - 連絡先の読み込み機能（ワンクリックでフォームに反映）
  - 連絡先の削除機能
- 🗄️ **IndexedDB v3へアップグレード**
  - `contacts` ストアを追加
  - 氏名・所属・関係性をインデックス化
  - タイムスタンプベースのソート機能
- 🎨 **UI/UX改善**
  - 連絡先リスト（スクロール可能、最大300px）
  - 保存/適用ボタンの並列配置
  - 連絡先アイテムに読み込み/削除ボタン
  - 関係性ラベルのバッジ表示
- ✨ **機能詳細**
  - 連絡先は新しい順に表示
  - 連絡先がない場合のメッセージ表示
  - トーストによるフィードバック
  - 削除時の確認ダイアログ

### v1.5.0 (Vertical Layout Revolution) - 2025年11月22日
- 🎨 **ページレイアウトの大規模再設計**
  - 横並び（エディタ | AI Panel）→ 縦並び（AI Panel → メール作成）に変更
  - **作業フローに完全に沿った構造**: 上から下へ自然な流れ
  - メール作成エリアがページ下部に配置
- 🔧 **HTML構造の刷新**
  - `.editor-layout` (grid) → `.content-wrapper` (flexbox vertical)
  - AI Panelを常時表示のsectionに変更
  - セクションヘッダーの統一（共通スタイル）
- 💎 **CSSの最適化**
  - 縦スクロールベースのレイアウトに最適化
  - レスポンシブデザインをシンプル化（既に縦並びのため）
  - 不要なクラス削除（.ai-panel-header, .close-panel-btn）
- ✨ **UX向上**
  - スクロールで全機能にアクセス可能
  - AI Panel の折りたたみ不要（常に表示）
  - より直感的な作業フロー
- 🧪 **動作確認**
  - 全機能正常動作確認済み
  - コンソールエラーゼロ
  - レイアウト崩れなし

### v1.4.3 (UI Restructure) - 2025年11月22日
- 🔧 **AI Panel セクション順序の最適化**
  - 作業フローに基づいた論理的な並び順に変更：
    1. **相手先情報** (誰に送るか)
    2. **AIアシスタント** (何を書くか相談)
    3. **AI提案** (メール作成支援)
    4. **文法チェック** (UI枠のみ・開発中)
    5. **トーン調整** (メール作成支援)
    6. **テンプレート** (テンプレート利用)
  - AIアシスタントをスタンドアロンから統合
  - HTML構造の簡素化（ヘッダー/トグル削除）
- 🗑️ **重複CSS削除**
  - 旧スタンドアロンAIチャットのCSS（120行以上）を削除
  - レスポンシブセクションの古いスタイル削除
  - コードの可読性とメンテナンス性向上
- ✅ **機能維持**
  - JavaScriptコードは変更なし（全機能正常動作）
  - メッセージ表示、入力、送信ボタンすべて機能

### v1.4.2 (Polish & Performance) - 2025年11月22日
- 🐛 **追加バグ修正**
  - パスワードフィールドをフォーム内に配置（セキュリティ警告解消）
  - 全てのボックスシャドウ色をオレンジ系に統一（5箇所）
  - 重複したCSS定義を削除（loading-overlay、toast-container）
- ✨ **CSS改善**
  - Toast通知の完全なスタイリング追加
  - Loading Overlayの完全なスタイリング追加
  - ダークモード対応のtoast色を追加
  - レスポンシブtoastスタイル（モバイル対応）
- 📦 **パフォーマンス**
  - 重複CSS削除によるファイルサイズ最適化
  - アニメーションパフォーマンスの向上

### v1.4.1 (Bug Fixes & UX Improvements) - 2025年11月22日
- 🐛 **バグ修正**
  - ロゴアイコンの色を紫(#667eea)からオレンジ(#FF9966)に修正
  - setupAIChat()メソッドの重複定義を削除
  - email-inputのフォーカス時のボックスシャドウ色を修正
  - エクスポートメニューの位置を動的計算に変更
  - 下書きボタンの挿入位置を修正（設定ボタンの前）
- ✨ **UIの改善**
  - AIチャットパネルの完全実装（トグル、メッセージ送信）
  - レスポンシブデザインの大幅改善（768px、1024px、480px対応）
  - スクロールバーのカスタムスタイリング追加
  - プレースホルダーのビジュアル改善（イタリック体、フォーカス時の透明度）
- ♿ **アクセシビリティ向上**
  - モーダルのフォーカストラップ実装
  - ESCキーでモーダル閉じる機能
  - モーダル外クリックで閉じる機能
  - フォーカス可視性の向上（outline統一）
  - ARIA属性の適切な更新

### v1.4.0 (Draft Management & Export) - 2025年11月22日
- 🎨 **オレンジ色を柔らかく調整** (#FF6B35 → #FF9966)
- ✨ **下書き管理システム実装**
  - 30秒ごとの自動保存
  - IndexedDB による永続化
  - 最大10件の下書き保持
  - 下書き一覧モーダル（読み込み・削除）
- ✨ **テキストエクスポート機能実装**
  - プレーンテキスト (.txt)
  - Markdown形式 (.md)
  - クリップボードコピー
- 🗄️ **IndexedDB v2** にアップグレード（draftsストア追加）

### v1.3.0 (Orange Theme) - 2025年11月22日
- 🎨 カラースキーム緑系→オレンジ系に変更
- 🎨 ぬるま湯データラボとの完全統一
- 📚 全ドキュメントをREADME.md 1つに集約
- 🗑️ 古いmdファイル8個を削除

### v1.2.0 - 2025年11月22日
- 🚀 単一ファイル化（外部依存ゼロ）
- ✨ プロンプトセクション追加
- ✨ 保存ステータス表示

### v1.1.0 - 2025年11月22日
- 🐛 ボタンID不一致の修正
- 🐛 AIパネルトグル機能の修正
- 🎨 レスポンシブデザイン強化

### v1.0.0 - 2024年9月13日
- 🎉 初回リリース

---

## 📘 新機能の使い方

### CRM機能: 要件・トピック・メール履歴 (v1.7.0)

#### 要件とトピックの記録
1. **要件・プロジェクト欄**に案件の概要を入力
   - 例: 「Webサイトリニューアル、予算500万円」
2. **最近のトピック欄**に進捗や話題を入力
   - 例: 「次回打ち合わせは来週、デザイン案を準備中」
3. 「情報を適用」で自動保存

#### メール履歴の活用
1. **メール送信後**: 自動的に履歴に記録
2. **連絡先読み込み**: 過去のメールが表示される
3. **履歴の詳細**: 「詳細を見る」で全文表示
4. **履歴の削除**: 不要な履歴を個別削除可能

#### メール履歴の利点
- 過去のやりとりが一目で分かる
- 次のメールを書く際の参考になる
- プロジェクトの進捗を追跡できる
- 最新20件まで自動保存

### 連絡先管理 (v1.6.1)

#### 連絡先の自動保存
1. **相手先情報**セクションで氏名・所属・関係性を入力
2. **「情報を適用」ボタン**をクリック
3. メール本文に情報が挿入され、同時に連絡先リストに自動保存されます

#### 連絡先の読み込み
1. **保存済み連絡先**リストから連絡先を選択
2. **読み込みボタン**（↓アイコン）をクリック
3. フォームに情報が自動入力されます

#### 連絡先の削除
1. 連絡先の**削除ボタン**（ゴミ箱アイコン）をクリック
2. 確認ダイアログで「OK」を選択

#### 連絡先の活用
- 保存した連絡先は最新順に表示
- 関係性は色付きバッジで表示
- 最大300pxまでスクロール可能

### 下書き管理システム (v1.4.0)

#### 自動保存
- **自動保存**: 30秒ごとに自動的に下書きを保存
- **保存条件**: 宛先、件名、本文のいずれかが入力されている場合
- **最大保存数**: 10件（古い下書きは自動削除）

#### 下書き一覧の表示
1. ヘッダー右上の**封筒アイコン**をクリック
2. 下書き数がバッジで表示されます
3. モーダルで全下書きを一覧表示

#### 下書きの操作
- **読み込み**: 「読み込み」ボタンでエディタに反映
- **削除**: 「削除」ボタンで下書きを削除
- **プレビュー**: 件名と本文の冒頭100文字を表示

### テキストエクスポート

#### エクスポート方法
1. ツールバーの**「エクスポート」ボタン**をクリック
2. 3つの形式から選択：
   - **プレーンテキスト** (.txt): シンプルなテキスト形式
   - **Markdown** (.md): 見出し・太字対応の形式
   - **クリップボードにコピー**: 他アプリへ即貼り付け

#### エクスポート内容
- 宛先
- 件名
- 本文（書式付き）

---

## 🛠️ トラブルシューティング

### Q: AI機能が動作しない
**A**: 設定画面でIO Intelligence APIキーを設定してください。

### Q: データが保存されない
**A**: ブラウザのIndexedDBとLocalStorageが有効か確認してください。プライベートモードでは保存されません。

### Q: 下書きが表示されない
**A**: IndexedDB v2に更新されています。古いデータは自動的に削除されます。ブラウザを再起動してみてください。

### Q: エクスポートボタンが見当たらない
**A**: ツールバーの右側、AI提案ボタンの隣にあります。画面幅が狭い場合は横スクロールしてください。

### Q: レイアウトが崩れる
**A**: ブラウザのキャッシュをクリアしてページを再読み込みしてください。

### Q: モバイルでツールバーが見切れる
**A**: v1.4.1でレスポンシブデザインを大幅改善しました。ツールバーは横スクロール可能で、768px以下では自動的に折り返しされます。

### Q: AIアシスタントはどこにありますか？
**A**: AI Panelを開くと、一番上に「相手先情報」、その次に「AIアシスタント」があります。質問や指示を入力フィールドに入力して送信ボタンを押してください。作業フローに沿った順序で配置されています。

### Q: モーダルが閉じられない
**A**: ESCキーを押すか、モーダルの外側をクリックするか、×ボタンをクリックしてください。

### Q: キーボードでナビゲートできない
**A**: v1.4.1でフォーカス可視性を向上させました。Tabキーで要素間を移動し、Enterキーで選択できます。

---

## 📖 オリジナル仕様書

### 1. エグゼクティブサマリー

#### プロジェクト名
**AI-powered Web Editor (AWE)**

#### ビジョン
日常的な文書作成（特にメール作成）を効率化し、AIが文脈を理解してユーザーの生産性を向上させる直感的なWebエディターの構築

#### 課題と解決策

**現在の課題:**
- メール作成・文書編集に多大な時間を消費（平均1日2-3時間）
- 適切なトーン調整や文法チェックに手間がかかる
- 既存ツール（Word、Googleドキュメント等）は高機能すぎて複雑
- 文脈を保持したまま部分編集ができるツールの不足

**提供する解決策:**
- AIによる文脈理解とリアルタイム提案
- シンプルで学習コストゼロのインターフェース
- メール作成特化機能によるタスク効率化
- セッション間でのコンテキスト記憶

### 2. 機能要件（MVP）

#### 基本エディター機能
| 機能 | 詳細 | 優先度 |
|------|------|----------|
| テキスト編集 | 入力、削除、コピー、ペースト、元に戻す、やり直す | 高 |
| 自動保存 | 30秒ごとのローカルストレージ保存 | 高 |
| リッチテキスト | 太字、斜体、下線、リスト書式 | 中 |

#### AI支援機能
| 機能 | 詳細 | トリガー | 優先度 |
|------|------|----------|----------|
| 文章補完 | ユーザー入力に基づく続きの提案 | Tabキー | 高 |
| 文法チェック（開発中） | UIシェルのみ。解析ロジックは未実装 | 予定: 自動（入力後1秒） | 高 |
| トーン調整 | フォーマル/カジュアル/友好的 | ユーザー指示 | 中 |
| 要約機能 | 長文の要点抽出 | ユーザー指示 | 中 |
| 文章展開 | 簡潔な内容を詳細に展開 | ユーザー指示 | 低 |

#### コンテキストメモリ機能
- **セッションメモリ**: 現在の編集セッション内での文脈保持
- **ヒストリー管理**: 編集履歴の追跡と参照
- **文体学習**: ユーザー固有の書き方・表現パターンの理解
- **コンテキスト保持部分編集**: 全体の文脈を考慮した部分的なAI編集

### 3. メールエディターレイアウト

```
┌──────────────────────────────────────────────────────┐
│ ヘッダー: AWE Logo | 保存状態 | 設定                │
├──────────────────────────────────────────────────────┤
│ ツールバー: B I U | List | AI提案 | トーン切替      │
├──────────────────────────────┬───────────────────────┤
│                              │  AIサイドパネル       │
│    メイン編集エリア           │  - 文章補完提案        │
│    （16px, 行間24px）         │  - 文法チェック結果    │
│                              │  - トーン調整          │
│                              │  - テンプレート        │
├──────────────────────────────┴───────────────────────┤
│ AIプロンプト入力: "この文章をよりフォーマルにして"  │
└──────────────────────────────────────────────────────┘
```

### 4. レスポンシブデザイン

| デバイス | 画面サイズ | レイアウト変更 |
|----------|------------|--------------|
| デスクトップ | 1024px+ | 3列レイアウト |
| タブレット | 768px-1023px | AIパネルをモーダル化 |
| モバイル | 767px以下 | 単一列、スライドメニュー |

### 5. アクセシビリティ要件
- **キーボードナビゲーション**: 全機能にTabキーでアクセス可能
- **スクリーンリーダー対応**: ARIAラベルと意味的なHTML構造
- **カラーコントラスト**: WCAG 2.1 AAレベル準拠
- **フォントサイズ**: 14px-24pxまでユーザー調整可能

### 6. パフォーマンス要件
| 項目 | 要件値 |
|------|--------|
| ページ読み込み時間 | 3秒以内 |
| AI応答時間 | 5秒以内 |
| 同時接続ユーザー数 | 100人 |
| テキスト保存頻度 | 30秒ごと |

### 7. セキュリティ要件
- **API キー管理**: GitHub Environment Secretsで保管、クライアント側露出防止
- **データ保護**: HTTPS通信必須、ローカルストレージ暗号化
- **セッション管理**: 30分タイムアウト

### 8. 技術アーキテクチャ
```
フロントエンド
├── HTML5/CSS3/JavaScript
├── フレームワーク: Vanilla JS
└── ビルドツール: なし（単一ファイル）

データストレージ
├── IndexedDB（メイン）
└── LocalStorage（フォールバック）

AI Integration
├── IO Intelligence API
├── Model: gpt-oss-120B
└── API管理: Environment Secrets
```

---

## 🔄 JSリファクタリング計画

### 現状分析

#### 現在のファイル構成
```
js/
├── inline-app.js (48KB)         # ブラウザ直接実行版（重複）
├── app.js (22KB)                # ES Module版（重複）
├── components/ (4ファイル)       # UIコンポーネント
├── services/ (3ファイル)         # サービス層
└── utils/ (2ファイル)            # ユーティリティ
```

#### 重複の詳細

1. **inline-app.js vs app.js**
   - 共通機能: エディタ初期化、設定管理、イベントハンドリング
   - 重複率: 約40%

2. **AIService.jsの重複メソッド**
   - `makeRequest()` - API呼び出し
   - `processAIResponse()` - レスポンス処理
   - `extractTextFromResponse()` - テキスト抽出
   - 重複率: 約15%

3. **MemoryService.jsの未使用メソッド**
   - `analyzeEditingPattern()` - 使用頻度低
   - `getStyleSuggestions()` - 未実装
   - `exportSession()/importSession()` - 未使用
   - 未使用率: 約30%

### リファクタリング戦略

#### Phase 1: ファイル統合（優先度：高）

**目標**: inline-app.js と app.js を1つに統合

**期待効果**:
- ファイル数: 2 → 1
- コードサイズ: 70KB → 50KB（-30%）
- 重複コード: 40% → 5% (-88%)

#### Phase 2: サービス層最適化（優先度：高）

**AIService.js**:
- 重複メソッドを統合
- ヘルパーメソッドをユーティリティに移動

**MemoryService.js**:
- 未使用メソッドを削除
- コア機能のみ保持

**期待効果**:
- コードサイズ: 29KB → 20KB (-30%)

#### Phase 3: コンポーネント統合（優先度：中）

**統合候補**:
- Toolbar.js + TemplateManager.js → EditorControls.js

**期待効果**:
- ファイル数: 4 → 3

### 実装スケジュール

**Week 1: Phase 1**
- [ ] editor-dev.js作成
- [ ] inline-app.jsとapp.jsの統合
- [ ] AIService.jsリファクタリング

**Week 2: Phase 2**
- [ ] MemoryService.jsリファクタリング
- [ ] 古いファイルの削除
- [ ] ドキュメント更新

**Week 3: Phase 3**
- [ ] コンポーネント統合
- [ ] 最終テスト
- [ ] リリース

### 期待される成果

| 項目 | Before | After | 改善率 |
|------|--------|-------|--------|
| JSファイル数 | 8 | 6 | -25% |
| 総コードサイズ | 167KB | 120KB | -28% |
| 重複コード | 40% | 5% | -88% |
| 保守性スコア | 70点 | 90点 | +20点 |

### 注意事項
⚠️ **index.htmlへの影響なし**: index.htmlはすでにすべてのJS/CSSがインライン化されているため、外部JSファイルの変更は影響しません。

---

## 🚧 既知の問題とTODO

### 現在確認されている問題

#### 1. AI API連携（優先度：高）
- **状態**: 部分実装
- **詳細**: モックレスポンスのみで動作
- **必要**: IO Intelligence APIとの実際の連携実装

#### 2. リアルタイム文法チェック（優先度：中）
- **状態**: UIのみ実装
- **詳細**: UI（セクションとトグル）のみ実装済み。解析処理は未実装。
- **必要**: 実際の文法解析ロジックとリアルタイム更新処理の実装

#### 3. 自動保存機能（優先度：中）
- **状態**: 部分実装
- **詳細**: 設定UIはあるが、実際の保存ロジックが不完全
- **必要**: LocalStorage/IndexedDBへの完全な自動保存実装

### JSファイルリファクタリング TODO

#### Phase 1: 重複コード削除（1週間）
- [ ] inline-app.js と app.js の重複機能を特定
- [ ] AIService.js の重複メソッドを統合
- [ ] MemoryService.js の未使用メソッドを削除
- [ ] ユーティリティ関数の統合

#### Phase 2: ファイル統合（1週間）
- [ ] 近い機能のコンポーネントを統合
- [ ] サービス層のファイル数を削減
- [ ] 不要な重複ファイルを削除

#### Phase 3: 最適化（1週間）
- [ ] パフォーマンス最適化
- [ ] コードサイズ削減
- [ ] メモリ使用量の削減

---

## 🔮 今後の拡張計画

### Phase 1: 完了した機能 ✅
- [x] 実際のAI API連携
- [x] 下書き管理システム（自動保存30秒、最大10件）
- [x] テキストエクスポート（.txt, .md, clipboard）
- [x] カラースキーム調整（柔らかいオレンジ）

### Phase 2: 追加機能（3ヶ月）
- [ ] リアルタイム文法チェック
- [ ] キーボードショートカットカスタマイズ
- [ ] 統計情報ダッシュボード
- [ ] PWA対応（オフラインインストール）
- [ ] PDFエクスポート
- [ ] 音声入力機能
- [ ] クラウド同期

### Phase 3: グローバル対応（6ヶ月）
- [ ] 多言語対応（英語、中国語、韓国語）
- [ ] リアルタイムコラボレーション
- [ ] エンタープライズ向け機能

### 成功指標

#### 定量的指標
- **メール作成時間**: 50%削減目標
- **ユーザー満足度**: 4.0/5.0以上
- **月間アクティブユーザー**: 100人以上（MVP段階）

#### 定性的指標
- 直感的な操作性
- 学習コストの低さ
- 日常業務への適合性

---

## 🌐 関連リンク

- [IO Intelligence API](https://api.io-intelligence.com/)
- [ぬるま湯データラボ](https://nurumayudatalab.com/)

---

## 🤝 貢献

### バグ報告
GitHubのIssueまたはプロジェクトの連絡先までお寄せください。

### 機能リクエスト
新機能の提案は大歓迎です。Issueに詳細を記載してください。

---

## 👥 開発チーム

**開発**: AIeditor Team  
**プロジェクトオーナー**: 久米慧嗣様  
**最終更新**: 2025年11月23日  

---

**プロジェクト状態**: 🟢 本番環境準備完了  
**ファイル**: index.html (110KB・自己完結型)  
**デプロイ方法**: Publishタブから1クリックデプロイ
