# **人生分岐体験ウェブアプリ 仕様書**

## 1. **コンセプト**

* ユーザーは5つの人生ステージ（幼少期・青年期・20代・30-40代・50-60代）で分岐する選択肢を回答し、仮想の人生ストーリーを体験する
* 各選択肢ごとに、その人の人生・選択の特徴を反映した画像をAIで自動生成
* 選択・体験ごとに「自己発見」や「人生のヒント」「リワード（称号/実績）」を得る
* 最終的に、全人生のストーリー・画像・ヒント・フィードバック・リワードをPDFにまとめてダウンロードやシェアができる

---

## 2. **機能要件**

### 2.1 **ステージ設計・進行フロー**

* 人生は5つの主要ステージに分割

  1. 幼少期
  2. 青年期
  3. 20代
  4. 30-40代
  5. 50-60代
* 各ステージで2〜4個の選択肢から一つを選ぶ
* ステージ進行時に、直前の選択やプレイヤー傾向に応じた「ヒント」を提示
* 各選択後、該当する人生シーン画像を生成・表示

### 2.2 **選択肢・ヒント・画像生成**

* 各ステージの選択肢は、

  * 固定パターン（基本分岐）＋
  * LLMによる履歴・ユーザー傾向ベースの動的生成
* ヒントもLMMが、過去の選択・ユーザータイプ・社会知見からパーソナライズして毎回自動生成
* 画像生成プロンプトも、現ステージ・選択内容・過去の選択や人生テーマ（安定/冒険/芸術等）・性別や属性などを組み合わせ、LMMで構築
* 例（LMMプロンプト）:

  * 「20代の女性が海外留学を選択、冒険志向で自由な雰囲気、アジアの都市風景、希望に満ちた表情」

### 2.3 **ユーザーデータと構造**

* 各ステージのデータをJSONで保持

  * 選択内容
  * base64画像データ
  * その選択へのAIコメントやヒント
* 例

```json
{
  "scene": "20代",
  "choice": "海外留学",
  "hint": "未知の体験があなたの世界を広げるきっかけに。変化を恐れず飛び込もう。",
  "image": "data:image/png;base64,...",
  "comment": "あなたは異文化の中で自分の価値観を広げました。"
}
```

* 全体の人生データ、選択履歴、ユーザータイプ、自己発見コメント、リワード・人生チート等もJSONに追加

### 2.4 **リワード（称号/実績）・自己発見・人生チート**

* 選択や行動傾向により“称号”や“実績”を獲得

  * 例：「冒険家賞」「堅実人生賞」「ミリオネア賞」等
* LMMによる「あなたの人生傾向」「自己発見コメント」を人生シナリオ総括として自動生成
* 「現実で使える人生チート（アドバイス）」も各ユーザーに合わせて生成し、PDF等で提示

### 2.5 **PDF出力・シェア**

* 人生ストーリー、各年代画像・選択肢・ヒント・AIコメント・リワード・人生チート等を**美しいテンプレートでPDF化**
* PDFには表紙（ユーザー名/人生テーマ/日付/QRコード/URL）を含める
* PDFはローカルDLやSNSシェア用のURL/QR生成も実装

### 2.6 **拡張性と保守性**

* 分岐・イベント・ヒントはJSON/DBでノード管理、LLMによる動的生成対応で拡張性◎
* 選択肢やヒント、称号なども管理UIで随時追加・調整可能

---

## 3. **技術要件・データ設計**

### 3.1 **JSON設計（MVP例）**

```json
{
  "user": {
    "name": "スミス",
    "lifeMood": "刺激的な人生"
  },
  "lifePath": [
    {
      "scene": "childhood",
      "choice": "本好きな子供",
      "hint": "幼少期の好奇心は将来の大きな財産です。",
      "image": "data:image/png;base64,...",
      "comment": "本から得た知識で世界が広がりました。"
    },
    {
      "scene": "teen",
      "choice": "部活で野球一筋",
      "hint": "継続と努力はいつか大きな成果に。",
      "image": "data:image/png;base64,...",
      "comment": "毎日グラウンドで汗を流した。"
    }
    // ...以下、20s, 30-40s, 50-60s
  ],
  "summary": {
    "type": "努力型サクセス人生",
    "analysis": "あなたは挑戦と努力で困難を乗り越えるタイプです。",
    "rewards": [
      {"title": "チャレンジャー賞", "description": "新しい挑戦を続けた証"}
    ],
    "cheatTips": [
      "リスクを恐れずに挑戦してみる",
      "人との出会いを大切に"
    ]
  }
}
```

---

### 3.2 **画像生成プロンプトの生成戦略**

* 各シーン/選択肢/履歴/人生ムード/属性をLMMへ渡し、文脈・雰囲気・物語性・視覚特徴を組み込んだプロンプトを動的に作成
* 例テンプレート：

  > "A {age} {gender}, who chose {choice}, reflecting {lifeMood} mood and past choices: {previousChoices}, in a {background/environment}. Show their {expression}, {attire}, and any symbolic items that tell their life story."
* 画像生成モデル（Stable Diffusion/DALL-E等）向けに最適化

---

### 3.3 **PDF生成とシェア**

* フロント/バックでPDF生成（jsPDF, pdf-lib, ReportLab等）
* PDF内容

  * 表紙（人生テーマ、ユーザー名、日付、QR/URL）
  * 各年代ページ：画像・選択肢・ヒント・コメント
  * 人生タイプ/リワード/人生チートまとめページ
* SNSシェア/LINE投稿/URL化等もUIからワンクリック

---

## 4. **ユーザー体験（UX）の特徴**

* 各ステージごとにパーソナライズされたヒントをもらえるため、現実の人生にも応用可能な“思考訓練”体験が得られる
* リアルな画像で“人生を可視化”し、「自分の選択で人生が変わる」を実感できる
* PDF保存・シェアで友人・家族とも楽しめる
* 繰り返し体験で「新たな自分」や「隠し実績」発見のやり込み要素も

---

## 5. **今後の拡張**

* 分岐イベントやヒント・称号の追加
* 選択肢やヒント生成のAI高度化
* マルチプレイ・他者比較・“現実人生のフィードバック”型機能
* ユーザー自身によるオリジナル分岐/シナリオ作成機能

---

## **まとめ**

本仕様は、

* 画像生成×AI分岐×インタラクティブ人生体験
* “自己発見”と“リアルな成長”を両立
* 拡張性・シェア性・楽しさを兼ね備える

**プロトタイプ設計、実装ロードマップ、UI設計などもご要望に応じてご提案します！** </contemplator>
