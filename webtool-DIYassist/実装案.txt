## あなたが何かを作る、修理する、アレンジするをアシストします

### 目的

ユーザーが自然言語で家具・インテリアの要件を入力すると、自動で3Dモデルを生成し、ブラウザ上でプレビュー。

承認後に3Dプリント用のSTLファイルを出力できるDIYサポートツール。


## 2. 主な機能要件

1. ユーザー入力／対話インタフェース

自然言語（日本語／英語）で家具の仕様を入力

入力例：「幅120cm×奥行60cm×高さ75cm の机、引き出し2つ付き、北欧風デザイン」

2. LLM連携／3Dモデル生成

入力テキストを API 経由で LLMに送信
LLMが頂点・面定義を含むWavefront OBJ形式テキストを返却
返却データの構文チェックおよびバリデーション実施

応用機能
テンプレートを用意して、テンプレートを編集することで、処理を簡略化することも検討

3. 3Dプレビュー

OBJデータを Three.js で読み込み
ポインタ操作（回転・ズーム・パン）によるモデル確認
マテリアル色やライティングの簡易設定

GUIで、3Dモデルを修正を可能にする。

4. 模型データ管理

確認済みモデルを一時保存（OBJ形式）
モデルごとにバージョン管理

5. STL変換／ダウンロード

ブラウザ内変換ライブラリ（e.g. `obj2stl.js`）で OBJ → STL 変換
生成したASCII STLファイルをユーザーにダウンロード提供

6. 履歴・プロジェクト管理

複数のプロジェクト（家具）を作成・一覧表示
各プロジェクトごとに入力テキスト、OBJ/STLデータを紐付け

---

## 3. システム構成

HTML+Three.js+css`

### 3.1 クライアントサイド

技術スタック：HTML5, CSS3, JavaScript, Three.js

主な役割：

入力フォーム UI
Three.js を用いたOBJモデルのレンダリング
STL 変換ライブラリ実行（クライアント変換の場合）
ダウンロードリンク生成

### API


LLM io-net API

### LLM

OBJ構文チェック・整形

---

## 4. データフロー

1. ユーザーが入力フォームへ自然言語を入力
2. クライアント → API へ `POST /api/generate-obj`
LLMは、https://nurumayu-worker.skume-bioinfo.workers.dev/経由でAPIを利用します。

 ```json
 { "prompt": "幅120cm×奥行60cm×高さ75cm の机、引き出し2つ付き、北欧風" }
 ```

3. サーバー → LLM → OBJテキストを受領
4. サーバー側で整形・バリデーション後、OBJテキストを返却
5. クライアントが Three.js で読み込み、プレビュー反映
6. ユーザー承認後、クライアント or サーバーで OBJ→STL 変換
7. STLファイルをクライアントにダウンロード可能状態で提供

---


## 6. UI/UXイメージ

1. トップ画面

2. 新規作成

テキスト入力欄（LLMプロンプト）
「モデル生成」ボタン
LLMは、https://nurumayu-worker.skume-bioinfo.workers.dev/経由でAPIを利用します。

3. プレビュー画面

Three.jsキャンバス領域
パラメータ調整（スケール／マテリアル色）UI
「承認してSTL生成」ボタン

4. ダウンロード画面

OBJダウンロードリンク
STLダウンロードリンク

---

## 7. 3Dモデル生成ワークフロー

1. LLMへプロンプト送信（LLMは、https://nurumayu-worker.skume-bioinfo.workers.dev/経由でAPIを利用します。）
2. 返却OBJテキストのパース
3. Three.js の `OBJLoader` でモデル化
4. ビュー操作（OrbitControls）を提供
5. モデル承認後、`OBJ2STL`へ変換処理

---


## 今後の拡張案

glTF対応：高品質マテリアル表現
マルチマテリアル生成：テクスチャやUVマッピング
寸法入力フォーム：GUIベースで数値入力
コラボレーション機能：複数ユーザーで同時編集

## 今後の拡張案：1. ユーザー体験／UX向上機能

寸法微調整UI
– モデル生成後に、直感的なスライダーや数値入力で幅・奥行・高さなどを微調整できる。
カメラ計測連携
– スマホカメラで部屋や家具を撮影し、寸法を自動取得→モデルに反映するAR機能。
ARプレビュー
– WebARを使って、実際の部屋に重ねて3Dモデルを配置・確認できる。

## 2. 今後の拡張案：コラボレーション／管理機能

チーム共有・コメント機能
– プロジェクトごとにチームメンバーと共有し、モデル上でコメントやフィードバックのやり取り。
バージョン管理
– 各修正履歴を自動保存し、任意のバージョンにロールバック可能。
承認ワークフロー
– “ドラフト→レビュー→承認” のステータス管理と通知。

## 今後の拡張案：3. 技術的品質保証

モデル検証・整合性チェック
– 非多様体ジオメトリやポリゴン数過多を検出／自動修正する。
パフォーマンス最適化
– 大規模モデルの場合にレベル・オブ・ディテール（LOD）で段階的に読み込む。
エラーハンドリング
– LLM応答の欠損やOBJパースエラーに対する自動再生成・リトライ機構。

## 今後の拡張案：4. マテリアル・コスト管理

BOM（部品表）／資材リスト出力
– 必要な部材・パーツの一覧と推定材料費を自動算出。
サプライヤー連携
– オンラインで部材の見積もり取得APIと連携し、コスト比較を提示。
3Dプリント見積り
– STLデータをプリントサービスにアップして概算見積りを取得。

## 今後の拡張案：5. 拡張エクスポート

多形式出力対応
– OBJ／STLに加え、glTF／FBX／STEPなどプロ用途フォーマットへの変換。
CAD連携プラグイン
– Blender、Fusion360など主要CADソフトへのワンクリックインポート。

## 今後の拡張案：6. LLM活用の信頼性向上

プロンプト管理・最適化
– 生成結果の品質を向上させるためのテンプレートや変数管理機能。
生成結果のプレビュー比較
– 複数パターンのOBJ案を一度に生成し、ユーザーがベストチョイス。
フィードバック学習ループ
– ユーザーの修正履歴を次回プロンプト調整に活用する仕組み。

